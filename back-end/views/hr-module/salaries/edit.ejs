<%- include('../../partials/master-part-1.ejs') %>
    <div class="col-md-12 box">
        <h3> Salaries CRUD </h3>
        <div class="col-md-12">
            <% errors.forEach(error => { %>
                <div class="alert alert-danger">
                    <%= error.msg %>
                </div>
            <% }) %>
        </div>
        <form method="POST">
            <div class="col-md-6">
                <div class="form-group">
                    <label> Employee </label>
                    <select class="form-control select2" name="employee_id">
                        <option value="">Select Employee</option>
                        <% employees.forEach(employee => { %>
                            <option <%= model.employee_id == employee.id ? 'selected' : '' %>
                                value="<%= employee.id %>"> <%= employee.name %> </option>
                        <% }) %>
                    </select>
                </div>
            </div>
            <div class="col-md-6">
                <div class="form-group">
                    <label> Salary </label>
                    <input class="form-control" placeholder="Salary" name="salary" value="<%= model.salary %>">
                </div>
            </div>
            <div class="col-md-6">
                <div class="form-group">
                    <label> Date From </label>
                    <input class="form-control date" placeholder="Date From" name="date_from">
                </div>
            </div>
            <div class="col-md-6">
                <div class="form-group">
                    <label> Date To </label>
                    <input class="form-control date" placeholder="Date To" name="date_to">
                </div>
            </div>
            <div class="col-md-6">
                <div class="form-group">
                    <label> Deduction Amount </label>
                    <input class="form-control" placeholder="Deduction Amount" name="deduction_amount" value="<%= model.deduction_amount %>">
                </div>
            </div>
            <div class="col-md-6">
                <div class="form-group">
                    <label> Advances Amount </label>
                    <input class="form-control" placeholder="Advances Amount" name="advances_amount" value="<%= model.advances_amount %>">
                </div>
            </div>
            <div class="col-md-6">
                <div class="form-group">
                    <label> Bonus Amount </label>
                    <input class="form-control" placeholder="Bonus Amount" name="bonus_amount" value="<%= model.bonus_amount %>">
                </div>
            </div>
            <div class="col-md-12">
                <button class="btn btn-primary"> Save </button>
            </div>
        </form>
    </div>
<%- include('../../partials/master-part-2.ejs') %>
	<script>
        // custom js here
        $(document).ready(function() {
            const date_from = new Date('<%= model.date_from %>')
            const date_from_year = date_from.getFullYear()
            const date_from_month = date_from.getMonth() + 1 <= 9 ? `0${date_from.getMonth() + 1}` : date_from.getMonth() + 1
            const date_from_day = date_from.getDate() <= 9 ? `0${date_from.getDate()}` : date_from.getDate()

            const date_to = new Date('<%= model.date_to %>')
            const date_to_year = date_from.getFullYear()
            const date_to_month = date_from.getMonth() + 1 <= 9 ? `0${date_from.getMonth() + 1}` : date_from.getMonth() + 1
            const date_to_day = date_from.getDate() <= 9 ? `0${date_from.getDate()}` : date_from.getDate()
            
            $('input[name="date_from"]').val(`${date_from_year}-${date_from_month}-${date_from_day}`)
            $('input[name="date_to"]').val(`${date_to_year}-${date_to_month}-${date_to_day}`)
        })
    </script>
<%- include('../../partials/master-part-3.ejs') %>